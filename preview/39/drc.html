<!DOCTYPE html> <html> <head> <meta charset="UTF-8"> <title>Dynamic Range Control</title> <style>body{font-family:sans-serif;font-size:16px;padding:0;margin:0}h1{font-size:24px}div#header{background-color:#a50034;color:#fff;margin:0;padding:15px;height:19px}div#header a{color:inherit}div#header img#logo{margin:-13px 0;position:absolute;right:0}div#content{margin-left:auto;margin-right:auto;width:500px;padding:10px;border-left:solid 1px #bab4af;border-right:solid 1px #bab4af}div.paramentrybox{border:solid 1px #bab4af;background-color:#dddad7;height:21px;padding:5px;margin-bottom:5px;display:grid;grid-template-columns:31px 309px 150px;width:490px}div.paramentrybox.with-slider{grid-template-columns:31px 100px 259px 100px}div.paramentrybox select{border:none;background-color:inherit;font-size:inherit;outline-color:#a50034;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAN0lEQVQ4y2NgGAWDFzCi8f+To5cRi+R/Ui1nxKHoPwmux2kILoMYGYgVxGEQIyWB/380/Q0QAAAycwYFwghIbQAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:right;appearance:none;-webkit-appearance:none;-moz-appearance:none}div.paramentrybox select:hover{background-color:#bab4af}div.paramentrybox input[type=checkbox]{outline-color:#a50034;height:19px;width:19px;margin:1px;border:solid 1px #000;appearance:none;-webkit-appearance:none;-moz-appearance:none}div.paramentrybox input[type=checkbox]:checked{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAZUlEQVQ4y2NgGAUMDAwMSxlM/sPYjJQaEM1whpGREgPIcgk2A6IZzjAy4VNAjAFwl6D7kRQDGBgYGBgJKSAkj9UlyAqJMQAlYAmFCS4DMGIHn0G4DMAaxcR6gWA6IRRbFCUsmgIAxm4ubQ4ML3YAAAAASUVORK5CYII=)}div.paramentrybox input[type=checkbox]:hover{background-color:#bab4af}div.paramentrybox.with-slider input[type=range]::-webkit-slider-runnable-track{background:linear-gradient(transparent,transparent 8px,#8c8279 8px,#8c8279 13px,transparent 13px)}div.tabs{padding:0 10px;margin:0 -10px;border-bottom:1px solid #bab4af}div.tabs>input{display:none}div.tabs>label{display:inline-block;margin:0 0 -1px;padding:10px 15px;text-align:center;border:1px solid transparent}div.tabs>label:hover{cursor:default}div.tabs>input:checked+label{border:1px solid #bab4af;border-top:2px solid #a50034;border-bottom:1px solid #fff}div.tabs>input:hover+label{border:1px solid #bab4af;border-top-width:2px}div.tabs>input:checked:hover+label{border-top:2px solid #a50034;border-bottom:1px solid #fff}input[type=button]{border:solid 1px #bab4af;background-color:#dddad7;outline-color:#a50034;vertical-align:top;height:21px;padding:5px;font-size:inherit;box-sizing:content-box}input[type=button]:hover{background-color:#bab4af}input[type=button]:disabled{color:#8c8279}input[type=button]:active{outline-width:2px;outline-style:auto}input[type=button]#play{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAT0lEQVQ4y63U2w0AIAwCQOj+O+MAPpHyWZNLtY3AHMFMberqQCyoLufqQJ6geuxYHcgRKnOa6kCW0A/CFGF6HaYPy3TETJeN6doTQez/ZACu/gocOUr/aAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center;width:21px}input[type=button]#play:disabled{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAZUlEQVQ4y63UOw7AIAwDUOMzd+nSgaVL79zuKB9bxSOJHkJBAZY883xhhtGhCzErOBCrogqxa1AgKjd1ENV3VxCdKWQQ3T8RQTZyXPf4hUSAhWSAjFSAhHRAiyhAiagAdqwBAPgAtC8jsWfuly4AAAAASUVORK5CYII=)}input[type=button]#stop{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAIUlEQVQ4y2NgoAJghNL/KTGDiRouGTVk1JBRQwbQEKoAAJELAR5uD40zAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-position:center;width:21px}input[type=button]#stop:disabled{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAK0lEQVQ4y2NgoAJgZGBgYOhpqvxPrgElde2MTNRwyagho4aMGjKAhlAFAAAXcgQeRPSW5AAAAABJRU5ErkJggg==)}.select{position:relative;display:inline-block;white-space:nowrap;height:30px}.select>div:nth-child(1){display:inline-block;border:solid 1px #bab4af;background-color:#dddad7;padding-right:26px;cursor:default;overflow-x:hidden;height:19px;padding:6px}.select>div:nth-child(1):hover{background-color:#bab4af}.select>div:nth-child(1):after{content:"";position:absolute;top:13px;right:8px;border:6px solid transparent;border-color:#000 transparent transparent transparent}.select>div:nth-child(2){position:absolute;top:100%;left:0;right:0;z-index:99;background-color:#dddad7;border:solid 1px #bab4af;visibility:hidden}.select>div:nth-child(2) div.selected{background-color:#e4b3c2}.select>div:nth-child(2) div.selected:hover{background-color:#c96685}.select>div:nth-child(2)>div.optgroup{font-weight:700}.select>div:nth-child(2)>div.optgroup>div{font-weight:400;padding-left:1.5em;overflow-x:hidden}.select>div:nth-child(2)>div.optgroup>div:hover{background-color:#bab4af}.select>div:nth-child(2)>div.optgroup>div.selected:hover{background-color:#c96685}</style> <script type="module" src="drc.js"></script> </head> <body> <div id="header"> <a href="index.html">jsdafx</a> <a href="https://www.hsu-hh.de/ant"><img src="images/ant_logo.png" id="logo"></a> </div> <div id="content"> <h1>Dynamic Range Control</h1> <div> <span class="select" id="source-select"> <div style="width: 410px;"></div> <div> <div class="optgroup"> Predefined </div> <div class="optgroup"> Local files <div style="font-style: italic;">Browse...</div> </div> </div> </span> <input type="button" id="play" disabled="true"> <input type="button" id="stop" disabled="true"> </div> <div id="graph" style="width: 500px; height: 250px; padding-top: 10px; display: flex"> <div style="width: 250px; font-size: 50px"><img src="images/drc/diag2.png" id="diagram"></div> <canvas id="funccanvas" width="250" height="250"></canvas> </div> <div id="envelopes" style="width: 500px; padding-top: 10px; display: flex"> <div style="width: 250px; display: inline flow-root"> <div style="text-align: center">Input signal</div> <canvas id="inputenvcanvas" width="250" height="150"></canvas> </div> <div style="width: 250px; display: inline flow-root"> <div style="text-align: center">Output signal</div> <canvas id="outputenvcanvas" width="250" height="150"></canvas> </div> </div> <div class="paramentrybox"> <input id="newyork" type="checkbox"><label for="linear">New York style</label> </div> <div class="paramentrybox"> <input id="bypass" type="checkbox"><label for="bypass">Bypass</label> </div> <p> This script allows a simple dynamic range control of an audio signal. To do this, the current level of the input signal is determined and a gain factor is derived, such that a given relation between input level and output level is achieved. </p> <p> This relation can be controlled with the curve displayed in the right half. </p><ul> <li> By dragging the upper right vertex horizontally the limiter threshold can be controlled. Input levels exceeding this threshold are attenuated to a constant output level. </li> <li> By dragging the upper right vertex vertically an overall gain can be controlled. </li> <li> By dragging the lower left vertex horizontally the noise threshold can be controlled. If the input level is below this threshold, the output is muted. </li> <li> By dragging the lower left vertex vertically the compression ratio is controlled, that is the slope of the line segment between limiter and noise threshold. A flat line segment causes compression, while a steep line segment causes expansion. </li> </ul> <p></p> <p> The gain factor thus obtained is low-pass filtered to reduce harmonic distortion. </p> <p> You can choose between two predefined audio signals or your own local audio file to be processed. </p> <p> Predefined music signal "Funk" is licensed under <a href="https://creativecommons.org/licenses/by/3.0/">CC-BY-3.0</a> by <a href="https://soundcloud.com/unfinite">unfinite</a>. </p> <p> Predefined music signal "Orchestra" is licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0">CC-BY-SA-4.0</a> by Porticodoro / SmartCGArt Media Productio. </p> </div> </body> </html> 