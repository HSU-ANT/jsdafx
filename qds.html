<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Quantization, Dithering, and Noise Shaping</title>
  <!-- build:remove -->
  <script src="https://unpkg.com/audioworklet-polyfill/dist/audioworklet-polyfill.js"></script>
  <!-- /build -->
  <!-- build:css inline build/jsdafx.css -->
  <link rel="stylesheet" href="jsdafx.css" />
  <!-- /build -->
  <script type="module" src="qds.js" ></script>
</head>
<body>
  <div id="header">
    <a href="index.html">jsdafx</a>
    <a href="https://www.hsu-hh.de/ant"><img src="images/ant_logo.png" id="logo"></a>
  </div>
  <div id="content">
    <h1>Quantization, Dithering, and Noise Shaping</h1>
    <!-- build:include playback_control_buttons.html -->
    <script id="_playback_controls">
    window.fetch("playback_control_buttons.html").then(
      (response) => response.text()
    ).then((txt) => {
      ctrls = document.createElement('template');
      ctrls.innerHTML = txt;
      scriptElem = document.getElementById("_playback_controls");
      scriptElem.parentElement.replaceChild(ctrls.content, scriptElem);
    });
    </script>
    <!-- /build -->
    <div style="margin-top: 10px;" class="tabs">
      <input id="spectrum" type="radio" name="tabs" checked />
      <label for="spectrum">Spectrum</label>
      <input id="waveform" type="radio" name="tabs" />
      <label for="waveform">Waveform</label>
    </div>
    <div id="graph" style="width: 500px; height: 200px; padding-top: 10px">
      <canvas id="funccanvas" width="500" height="200"></canvas>
    </div>
    <div style="width: 500px; padding-bottom: 10px; text-align: right">
      <input id="linear" type="checkbox" /><label for="linear">linear</label>
    </div>
    <div style="width: 500px; padding: 10px;" align="center" >
      <img src="images/qds/ns5.png" id="diagram" />
    </div>
    <div class="paramentrybox">
      <span></span>
      <span>Quantization word length</span>
      <select id="wordlength">
        <option value="16">16</option>
        <option value="10">10</option>
        <option value="8">8</option>
        <option value="6">6</option>
        <option value="4">4</option>
        <option value="2">2</option>
      </select>
    </div>
    <div class="paramentrybox">
      <input id="dither" type="checkbox" /><label for="dither">Dither</label>
      <select id="dithertype">
        <option value="rect">rectangular</option>
        <option value="tri">triangular</option>
        <option value="hp">high-pass</option>
      </select>
    </div>
    <div class="paramentrybox">
      <input id="noiseshaping" type="checkbox" /><label for="noiseshaping">Noise-shaping</label>
      <select id="noiseshapingfilter">
        <option value="1">First Order</option>
        <option value="2">Second Order</option>
        <option value="3">Psychoacoustic3</option>
        <option value="5">Psychoacoustic5</option>
        <option value="9">Psychoacoustic9</option>
      </select>
    </div>
    <p>
      This script demonstrates audio effects resulting from <b>Quantization</b>. It
      is designed for a first insight into the perceptual effects of quantizing an
      audio signal.
    </p>
    <p>The following options can be set in the lower part of the  user interface</p>
    <ul>
      <li> <b>Quantizer&nbsp;</b>
        <ul>
          <li>word length w leads to quantization step size Q=2⁻⁽ʷ⁻¹⁾<br>
          </li>
        </ul>
      </li>
      <li><b>Dither</b>
        <ul>
          <li>rect dither - uniform probability density function </li>
          <li>tri dither - triangular probability density function</li>
          <li>
            high-pass dither - triangular probability density function and high-pass power
            spectral density
          </li>
        </ul>
      </li>
      <li><b>Noise shaping</b>
        <ul>
          <li>first-order H(z)=z⁻¹</li>
          <li>second-order H(z)=-2z⁻¹+z⁻²</li>
          <li>psychoacoustic noise shaping </li>
        </ul>
      </li>
    </ul>
    <p>
      You can choose between two predefined audio signals or your own local audio file to
      be processed.
    </p>
    <p>
      Predefined music signal is licensed under
      <a href="https://creativecommons.org/licenses/by/3.0/">CC-BY-3.0</a> by
      <a href="https://soundcloud.com/unfinite">unfinite</a>.
    </p>
  </div>
</body>
</html>
