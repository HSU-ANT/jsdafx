import{SignalGraph as e,setupAudio as t,setupPlayerControls as n}from"./common.js";window.addEventListener("load",async()=>{const c=await t("qdsproc.js","qds-processor");c.proc.w=16,c.proc.dither=!0,c.proc.dithertype="rect",c.proc.noiseshaping=!0,c.proc.noiseshapingfilter=1,n(c,[{type:"sine"},{type:"remote",label:"Music",url:"audio/unfinite_function.mp3"}]);const d=new e(c,document.getElementById("funccanvas")),o=document.getElementById("linear");o.checked=!1,o.onchange=function(e){d.freqLinear=e.target.checked};const i=e=>{d.drawWave=e,o.style.visibility=o.labels[0].style.visibility=e?"hidden":"visible"};function g(){document.getElementById("dither").checked?document.getElementById("noiseshaping").checked?document.getElementById("diagram").src="images/qds/ns5.png":document.getElementById("diagram").src="images/qds/ns5b.png":document.getElementById("noiseshaping").checked?document.getElementById("diagram").src="images/qds/ns5c.png":document.getElementById("diagram").src="images/qds/ns5d.png"}document.getElementById("spectrum").onchange=e=>{i(!e.target.checked)},document.getElementById("waveform").onchange=e=>{i(e.target.checked)},document.getElementById("wordlength").value=16,document.getElementById("wordlength").onchange=function(e){c.proc.w=e.target.value},document.getElementById("dither").checked=!0,document.getElementById("dither").onchange=function(e){c.proc.dither=e.target.checked,g()},document.getElementById("noiseshaping").checked=!0,document.getElementById("noiseshaping").onchange=function(e){c.proc.noiseshaping=e.target.checked,g()},document.getElementById("dithertype").value="rect",document.getElementById("dithertype").onchange=function(e){c.proc.dithertype=e.target.value},document.getElementById("noiseshapingfilter").value=1,document.getElementById("noiseshapingfilter").onchange=function(e){c.proc.noiseshapingfilter=e.target.value}});