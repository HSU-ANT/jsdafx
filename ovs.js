import{SignalGraph as e,setupAudio as t,setupPlayerControls as n}from"./common.js";window.addEventListener("load",async()=>{const c=await t("ovsproc.js","ovs-processor");c.proc.w=16,c.proc.dithertype="rect",c.proc.noiseshapingfilter=1,c.proc.oversamplingfactor=4,n(c,[{type:"sine"},{type:"remote",label:"Music",url:"audio/unfinite_function.mp3"}]);const o=new e(c,document.getElementById("funccanvas")),d=document.getElementById("linear");d.checked=!1,d.onchange=function(e){o.freqLinear=e.target.checked};const i=e=>{o.drawWave=e,d.style.visibility=d.labels[0].style.visibility=e?"hidden":"visible"};function m(){document.getElementById("dither").checked?document.getElementById("noiseshaping").checked?document.getElementById("diagram").src="images/ovs/ns5.png":document.getElementById("diagram").src="images/ovs/ns5b.png":document.getElementById("noiseshaping").checked?document.getElementById("diagram").src="images/ovs/ns5c.png":document.getElementById("diagram").src="images/ovs/ns5d.png"}function g(){document.getElementById("dither").checked?c.proc.dithertype=document.getElementById("dithertype").value:c.proc.dithertype="none",m()}function a(){document.getElementById("noiseshaping").checked?c.proc.noiseshapingfilter=document.getElementById("noiseshapingfilter").value:c.proc.noiseshapingfilter=0,m()}document.getElementById("spectrum").onchange=e=>{i(!e.target.checked)},document.getElementById("waveform").onchange=e=>{i(e.target.checked)},document.getElementById("wordlength").value=16,document.getElementById("wordlength").onchange=function(e){c.proc.w=e.target.value},document.getElementById("dither").checked=!0,document.getElementById("dither").onchange=g,document.getElementById("noiseshaping").checked=!0,document.getElementById("noiseshaping").onchange=a,document.getElementById("dithertype").value="rect",document.getElementById("dithertype").onchange=g,document.getElementById("noiseshapingfilter").value=1,document.getElementById("noiseshapingfilter").onchange=a,document.getElementById("oversamplingfactor").value=4,document.getElementById("oversamplingfactor").onchange=e=>{c.proc.oversamplingfactor=e.target.value}});